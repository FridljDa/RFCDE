knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
devtools::load_all()
set.seed(42)
generate_data <- function(n) {
x_relevant <- matrix(runif(n * 10), n, 10)
x_irrelevant <- matrix(runif(n * 10), n, 10)
z <- rnorm(n, rowSums(x_relevant), 1)
return(list(x = cbind(x_relevant, x_irrelevant), z = z))
}
n_train <- 10000
n_test <- 4
train_data <- generate_data(n_train)
x_train <- train_data$x
z_train <- train_data$z
n_trees <- 10
mtry <- 4
node_size <- 5
n_basis <- 15
stdout <- vector('character')
con    <- textConnection('stdout', 'wr', local = TRUE)
sink(con)
forest <- RFCDE(x_train, z_train, n_trees = n_trees, mtry = mtry,
node_size = node_size, n_basis = n_basis, basis_system = "cosine",
min_loss_delta = 0)
sink()
close(con)
stdout
oc0<- stringr::str_count(stdout, "0") #incorrect splits
oc1<- stringr::str_count(stdout, "1") #correct splits
oc1/(oc0+oc1) # we want this number to be high!
